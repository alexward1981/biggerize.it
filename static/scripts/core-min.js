var Core=Core||{};Core={constructor:function(){this.bodyTag=$("body"),this.defaultPage=this.bodyTag.find(".default-page"),this.directAccess=this.bodyTag.find(".direct-access"),this.vars=this.getUrlVars().string,this.fontChoice=this.getUrlVars().fontPicker,this.fontStyle=this.getUrlVars().fontStyle,this.fontColor=this.getUrlVars().fontColor,this.tag=$("<h1></h1>"),this.inputField=this.bodyTag.find('input[type="text"]'),this.fontPicker=this.bodyTag.find('select[name="fontPicker"]'),this.submitBtn=this.bodyTag.find('input[type="submit"]'),this.pageHeight=this.bodyTag.height(),this.pageWidth=this.bodyTag.width()},init:function(){var t=this;t.constructor(),t.detectPageType(),t.validate(),t.fitToParent(),t.bodyTag.find(".notify").remove()},getUrlVars:function(){for(var t,e=[],i=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<i.length;a++)t=i[a].split("="),e.push(t[0]),e[t[0]]=t[1];return e},defaultVars:function(){var t=this;t.defaultValue="Type the text you want to be biggerer ",t.inputField.val(t.defaultValue).focus(function(){$(this).val("")}),t.inputField.val(t.defaultValue).blur(function(){$(this).val()||$(this).val(t.defaultValue)})},applyOptions:function(){var t=this;t.fontChoice&&t.loadFonts(t.fontChoice,t.fontChoice.replace("+"," ")),t.fontStyle&&t.tag.addClass(t.fontStyle),t.fontColor&&t.tag.css("color","#"+t.fontColor)},detectPageType:function(){var t=this;t.vars?(t.defaultPage.remove(),t.vars=t.vars.replace(/\+/g," "),t.tag.text(decodeURIComponent(t.vars)).appendTo(t.directAccess),t.applyOptions()):(t.directAccess.remove(),t.defaultVars(),t.bodyTag.find("footer").appendTo(t.bodyTag))},validate:function(){var t=this;t.submitBtn.bind("click",function(e){var i=$('<div class="error"></div>'),a="",n=!1;""===t.inputField.val().trim()?a="You want me to make NOTHING bigger? Were you dropped on your head as a child?":t.inputField.val()===t.defaultValue?a="I'm not making the default text bigger, that's just boring":n=!0,n||(e.preventDefault(),t.defaultPage.find(".error").remove(),i.insertAfter(t.submitBtn).text(a))})},loadFonts:function(t,e){e=e||t;var i=this;WebFontConfig={google:{families:[t]}},function(){var t=document.createElement("script");t.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),i.vars&&i.tag.css("font-family",e+"'sans-serif")},fitToParent:function(){var t=this,e=t.directAccess&&t.defaultPage,i=parseInt(e.css("padding")),a=t.bodyTag.find("footer").outerHeight(!0);/\s/.test(t.tag.text())||t.tag.css("word-break","break-all"),e.css({height:t.pageHeight-a-2*i+"px"}),this.vars&&(e.css({width:t.pageWidth-2*i+"px"}),t.pageWidth>450?t.tag.text().length<4?t.tag.fitText(1,{minFontSize:"600px"}):t.tag.text().length<7?t.tag.fitText(1,{minFontSize:"500px"}):t.tag.text().length<8?t.tag.fitText(1,{minFontSize:"350px"}):t.tag.text().length<13?t.tag.fitText(1,{minFontSize:"250px"}):t.tag.fitText(.9):t.tag.text().length>5?t.tag.fitText(1,{MaxFontSize:"100px"}):t.tag.fitText(.2,{MinFontSize:"100px"}))}},function(t){t.fn.fitText=function(e,i){var a=e||1,n=t.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},i);return this.each(function(){var e=t(this),i=function(){e.css("font-size",Math.max(Math.min(e.width()/(10*a),parseFloat(n.maxFontSize)),parseFloat(n.minFontSize)))};i(),t(window).on("resize.fittext orientationchange.fittext",i)})}}(jQuery),$(function(){Core.init()});